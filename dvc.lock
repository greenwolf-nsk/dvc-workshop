schema: '2.0'
stages:
  process_data:
    cmd: python process_data.py
    deps:
    - path: data/raw/Amazon_Fashion.jsonl.gz
      hash: md5
      md5: 49b7abcaa210692f9a03d6082302bbc9
      size: 295578253
    - path: process_data.py
      hash: md5
      md5: b09021443c4819889ac1d13f827bf1f6
      size: 1135
    params:
      params.yaml:
        process_data.sample: 500000
        process_data.test_size: 0.2
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: d315b4a7511becfd649e5c977c733ae0
      size: 27725141
    - path: data/processed/train.csv
      hash: md5
      md5: ba50e16cf88997b9ae041d36291cdb75
      size: 111667004
  create_features:
    cmd: python create_features.py
    deps:
    - path: create_features.py
      hash: md5
      md5: 1fa05acc88e3d11771c3631bed98dc30
      size: 1413
    - path: data/processed/test.csv
      hash: md5
      md5: d315b4a7511becfd649e5c977c733ae0
      size: 27725141
    - path: data/processed/train.csv
      hash: md5
      md5: ba50e16cf88997b9ae041d36291cdb75
      size: 111667004
    params:
      params.yaml:
        create_features.max_features: 20000
    outs:
    - path: data/features/test_features.npz
      hash: md5
      md5: f244a1415f9d4e62454b044615bd250e
      size: 18603309
    - path: data/features/test_target.csv
      hash: md5
      md5: cee17f8caa82dfacb18fedcb4aa1dbf4
      size: 400007
    - path: data/features/train_features.npz
      hash: md5
      md5: 87dddef3ff8445c4ab4850ae889159c9
      size: 74654573
    - path: data/features/train_target.csv
      hash: md5
      md5: 31713ee8ffc0943a98ea7cdc1f201bb4
      size: 1600007
  train_model:
    cmd: python train_model.py
    deps:
    - path: data/features/test_features.npz
      hash: md5
      md5: f244a1415f9d4e62454b044615bd250e
      size: 18603309
    - path: data/features/test_target.csv
      hash: md5
      md5: cee17f8caa82dfacb18fedcb4aa1dbf4
      size: 400007
    - path: data/features/train_features.npz
      hash: md5
      md5: 87dddef3ff8445c4ab4850ae889159c9
      size: 74654573
    - path: data/features/train_target.csv
      hash: md5
      md5: 31713ee8ffc0943a98ea7cdc1f201bb4
      size: 1600007
    - path: train_model.py
      hash: md5
      md5: 50afc7cb80a37da432e13599cecebe9c
      size: 1341
    params:
      params.yaml:
        train_model.alpha: 0.01
    outs:
    - path: metrics.json
      hash: md5
      md5: f41c7844d5102f8a93de5a76dd98b834
      size: 74
    - path: models/model.pkl
      hash: md5
      md5: ddca60fdfa8517a2a93d16b9b6ee0791
      size: 160455
  train_lightgbm_model:
    cmd: python train_lightgbm_model.py
    deps:
    - path: data/features/test_features.npz
      hash: md5
      md5: f244a1415f9d4e62454b044615bd250e
      size: 18603309
    - path: data/features/test_target.csv
      hash: md5
      md5: cee17f8caa82dfacb18fedcb4aa1dbf4
      size: 400007
    - path: data/features/train_features.npz
      hash: md5
      md5: 87dddef3ff8445c4ab4850ae889159c9
      size: 74654573
    - path: data/features/train_target.csv
      hash: md5
      md5: 31713ee8ffc0943a98ea7cdc1f201bb4
      size: 1600007
    - path: train_lightgbm_model.py
      hash: md5
      md5: 8010d9954c0d70c5209254065436e57d
      size: 1478
    params:
      params.yaml:
        lightgbm.learning_rate: 0.01
        lightgbm.max_depth: 10
        lightgbm.n_estimators: 100
        lightgbm.random_state: 42
    outs:
    - path: lightgbm_metrics.json
      hash: md5
      md5: 912233e48497d65b3d4c46fb378f9ea7
      size: 75
    - path: models/lightgbm_model.pkl
      hash: md5
      md5: 1230faaf7860b0f4fb6eb76083bffbf4
      size: 837766
